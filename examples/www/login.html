<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <title>Login</title>
    <style>
    :root
    {
      --cor-primaria: #4f46e5;
      --cor-fundo: #0e1529;
      --cor-texto: #e5e7eb;
      --cor-texto-sec: #cbd5e1;
      --bordas: rgba(255,255,255,0.1);
    }

    *
    {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body
    {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: #f3f4f6;
      color: #111;
      line-height: 1.6;
    }

    .loginDiv
    {
        width: 340px;
      max-width: 400px;
      background-color: #272d3d;
      color: var(--cor-texto);
      margin: 80px auto;
      padding: 30px 40px 100px 40px;
      border: 1px solid var(--bordas);
      border-radius: 5px;
      text-align: center;
      border-radius: 10px;
    }

    input
    {
        padding: 10px;
        margin: 5px 0;
        width: 200px;
    }

    button
    {
        padding: 10px 15px;
        margin-top: 10px;
        background-color: #4f46e5;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover
    {
        background-color: #3730a3;
    }
    </style>
<body>
    <div class="loginDiv">
         <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 20px;">
        <img src="./3u-server-svgrepo-com.png" alt="svServer" style="width: 32px; height: 28px;">
        <h1>Login</h1>
    </div>

        <form method="POST" action="/login">
            <input type="text" name="user" placeholder="Nome" required><br><br>
            <input type="password" name="pass" placeholder="Senha" required><br><br>

            <!-- token será preenchido via JS -->
            <input id="csrf" type="hidden" name="csrf">

            <button type="submit">Entrar</button><br><br>
            <button onclick="home()">Página inicial</button>
        </form>
    </div>
    <script>
        // preencher csrf
        fetch("/csrf").then(r => r.text()).then(t => {
            document.getElementById("csrf").value = t;
            console.log("CSRF token set:", t);
        }).catch(err =>
        {
            console.error("Failed to fetch CSRF token:", err);
        });

        function home() { window.location = "/"; }

        // handler de submit: se campos preenchidos alerta "Login OK!"
        document.getElementById("loginForm").addEventListener("submit", function(e) {
            const user = document.getElementById("user").value.trim();
            const pass = document.getElementById("pass").value.trim();
            const csrf = document.getElementById("csrf").value.trim();

            if (user && pass && csrf) {
                alert("Login OK!");
                // se quiser impedir o envio ao servidor, use e.preventDefault();
                // e.preventDefault();
            }
            else
            {
                e.preventDefault();
                alert("Preencha todos os campos antes de enviar.");
            }
        });
    </script>
</body>
</html>